class SecondStoryApp{constructor(){this.init()}init(){this.initMobileMenu(),this.initScrollEffects(),this.initAnimatedStats(),this.initCharts(),this.initTabs(),this.initBudgetChart(),this.initSmoothScrolling(),this.initIntersectionObserver()}initMobileMenu(){let t=document.getElementById("menu-btn"),a=document.getElementById("mobile-menu");t&&a&&(t.addEventListener("click",()=>{a.classList.contains("active")?this.closeMobileMenu():this.openMobileMenu()}),a.querySelectorAll("a").forEach(e=>{e.addEventListener("click",()=>{this.closeMobileMenu()})}),document.addEventListener("click",e=>{t.contains(e.target)||a.contains(e.target)||this.closeMobileMenu()}))}openMobileMenu(){var e=document.getElementById("mobile-menu"),t=document.getElementById("menu-btn");e.classList.add("active"),t.setAttribute("aria-expanded","true"),document.body.style.overflow="hidden"}closeMobileMenu(){var e=document.getElementById("mobile-menu"),t=document.getElementById("menu-btn");e.classList.remove("active"),t.setAttribute("aria-expanded","false"),document.body.style.overflow=""}initScrollEffects(){let t=document.querySelector(".header"),a=window.scrollY;window.addEventListener("scroll",this.throttle(()=>{var e=window.scrollY;50<e?t.classList.add("scrolled"):t.classList.remove("scrolled"),a=e},16))}initAnimatedStats(){let a=[{id:"unemployment-stat",target:27,suffix:"%"},{id:"rearrest-stat",target:83,suffix:"%"},{id:"cost-stat",target:48,suffix:"B",prefix:"$"}];let r=new IntersectionObserver(e=>{e.forEach(t=>{var e;t.isIntersecting&&(e=a.find(e=>e.id===t.target.id))&&(this.animateValue(t.target,0,e.target,1500,e),r.unobserve(t.target))})},{threshold:.5,rootMargin:"0px 0px -100px 0px"});a.forEach(e=>{e=document.getElementById(e.id);e&&r.observe(e)})}animateValue(r,o,i,n,l){let s=performance.now(),d=e=>{var e=e-s,e=Math.min(e/n,1),t=1-Math.pow(1-e,3),t=Math.floor(t*(i-o)+o);let a="";l.prefix&&(a+=l.prefix),a+=t,l.suffix&&(a+=l.suffix),r.textContent=a,e<1&&requestAnimationFrame(d)};requestAnimationFrame(d)}initCharts(){"undefined"==typeof Chart?console.warn("Chart.js not loaded. Charts will not be rendered."):(Chart.defaults.font.family="'Inter', sans-serif",Chart.defaults.font.size=12,Chart.defaults.color="#3F3F3F",this.createEmploymentChart(),this.createPlacementChart(),this.createSalaryChart(),this.createRecidivismChart())}getChartConfig(){return{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{labels:{color:"#355E3B",font:{size:12,family:"'Inter', sans-serif"},padding:20,usePointStyle:!0}},tooltip:{backgroundColor:"rgba(53, 94, 59, 0.95)",titleColor:"#fff",bodyColor:"#fff",cornerRadius:8,displayColors:!1,titleFont:{size:14,weight:"600"},bodyFont:{size:13}}},scales:{y:{beginAtZero:!0,grid:{color:"#C2C2C2",lineWidth:1},ticks:{color:"#3F3F3F",font:{size:11}}},x:{grid:{display:!1},ticks:{color:"#3F3F3F",font:{size:11}}}},animation:{duration:1500,easing:"easeOutCubic"}}}createEmploymentChart(){var e,t=document.getElementById("employmentRecidivismChart");t&&((e=this.getChartConfig()).plugins.tooltip.callbacks={label:e=>e.label+`: ${e.raw}%`},new Chart(t,{type:"bar",data:{labels:["Unemployed","Employed for 1 Year"],datasets:[{label:"3-Year Recidivism Rate",data:[52,16],backgroundColor:["#ef4444","#355E3B"],borderColor:["#dc2626","#2a4a30"],borderWidth:2,borderRadius:6,borderSkipped:!1}]},options:e}))}createPlacementChart(){var e=document.getElementById("placementRateChart");e&&new Chart(e,{type:"doughnut",data:{labels:["Placed in Tech Role","Seeking Placement"],datasets:[{data:[90,10],backgroundColor:["#355E3B","#C2C2C2"],borderColor:"#fff",borderWidth:4,hoverBackgroundColor:["#4a7c52","#A3B9A4"]}]},options:{responsive:!0,maintainAspectRatio:!1,cutout:"70%",plugins:{legend:{display:!1},tooltip:{backgroundColor:"rgba(53, 94, 59, 0.95)",titleColor:"#fff",bodyColor:"#fff",callbacks:{label:e=>e.label+`: ${e.raw}%`}}},animation:{duration:2e3,easing:"easeOutCubic"}}})}createSalaryChart(){var e,t=document.getElementById("salaryChart");t&&((e=this.getChartConfig()).plugins.legend.display=!1,e.plugins.tooltip.callbacks={label:e=>e.label+": $"+e.raw.toLocaleString()},e.scales.y.ticks.callback=e=>`$${e/1e3}k`,new Chart(t,{type:"bar",data:{labels:["Average U.S. Salary","Second Story Graduate"],datasets:[{label:"Average Starting Salary",data:[56e3,85e3],backgroundColor:["#3F3F3F","#355E3B"],borderRadius:6,borderSkipped:!1}]},options:e}))}createRecidivismChart(){var e,t=document.getElementById("recidivismReductionChart");t&&((e=this.getChartConfig()).plugins.legend.display=!1,e.plugins.tooltip.callbacks={label:e=>e.label+`: ${e.raw}%`},new Chart(t,{type:"bar",data:{labels:["National Average (3-year)","Second Story Goal"],datasets:[{label:"Recidivism Rate",data:[68,5],backgroundColor:["#ef4444","#355E3B"],borderRadius:6,borderSkipped:!1}]},options:e}))}initTabs(){let r=document.querySelectorAll(".tabs__button"),o=document.querySelectorAll(".tabs__panel");if(0!==r.length&&0!==o.length){let a=e=>{r.forEach(e=>{e.classList.remove("active"),e.setAttribute("aria-selected","false")}),o.forEach(e=>{e.classList.remove("active"),e.setAttribute("aria-hidden","true")});var t=document.querySelector(`[data-tab="${e}"]`),e=document.getElementById(e);t&&e&&(t.classList.add("active"),t.setAttribute("aria-selected","true"),e.classList.add("active"),e.setAttribute("aria-hidden","false"))};var e;r.forEach(t=>{t.addEventListener("click",()=>{var e=t.getAttribute("data-tab");a(e)}),t.addEventListener("keydown",e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),t.click())})}),r[0]&&(e=r[0].getAttribute("data-tab"),a(e))}}initBudgetChart(){if("undefined"!=typeof Chart){let l={year1:{labels:["Program Services","Administration","Fundraising"],data:[229875,71e3,16e3],total:316875},year2:{labels:["Program Services","Administration","Fundraising"],data:[523163,74300,17270],total:614733}};var t=document.getElementById("budgetChart");if(t){let r=new Chart(t,{type:"bar",data:{labels:l.year1.labels,datasets:[{label:"Expenses",data:l.year1.data,backgroundColor:["#355E3B","#3F3F3F","#A3B9A4"],borderRadius:6,borderSkipped:!1}]},options:{indexAxis:"y",responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{backgroundColor:"rgba(53, 94, 59, 0.95)",titleColor:"#fff",bodyColor:"#fff",callbacks:{label:e=>e.label+": $"+e.raw.toLocaleString()}}},scales:{y:{grid:{display:!1},ticks:{color:"#3F3F3F"}},x:{grid:{color:"#C2C2C2"},ticks:{color:"#3F3F3F",callback:e=>`$${e/1e3}k`}}},animation:{duration:1500,easing:"easeOutCubic"}}}),o=document.getElementById("year1-btn"),i=document.getElementById("year2-btn"),n=document.getElementById("budget-details"),e=e=>{var t=l[e],a=(r.data.datasets[0].data=t.data,r.update("active"),"year1"===e);o.classList.toggle("active",a),i.classList.toggle("active",!a),n&&(n.innerHTML=`
                    <p class="budget-details__text">
                        Total Projected Expenses for ${e.replace("year","Year ")}: 
                        <span class="budget-details__total">$${t.total.toLocaleString()}</span>
                    </p>
                `)};o&&i&&(o.addEventListener("click",()=>e("year1")),i.addEventListener("click",()=>e("year2"))),e("year1")}}}initSmoothScrolling(){document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",e=>{var t=a.getAttribute("href");"#"!==t&&(t=document.querySelector(t))&&(e.preventDefault(),e=document.querySelector(".header").offsetHeight,t=t.offsetTop-e-20,window.scrollTo({top:t,behavior:"smooth"}),this.closeMobileMenu())})})}initIntersectionObserver(){let t=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&(e.target.style.opacity="1",e.target.style.transform="translateY(0)")})},{threshold:.1,rootMargin:"0px 0px -50px 0px"});document.querySelectorAll(".card, .stat-card").forEach(e=>{e.style.opacity="0",e.style.transform="translateY(20px)",e.style.transition="opacity 0.6s ease, transform 0.6s ease",t.observe(e)})}throttle(t,a){let r;return function(){var e=arguments;r||(t.apply(this,e),r=!0,setTimeout(()=>r=!1,a))}}debounce(t,a){let r;return function(...e){clearTimeout(r),r=setTimeout(()=>{clearTimeout(r),t(...e)},a)}}logPerformance(){"performance"in window&&window.addEventListener("load",()=>{setTimeout(()=>{var e=performance.timing,e=e.loadEventEnd-e.navigationStart;console.log(`Page load time: ${e}ms`)},0)})}handleError(e,t="Unknown"){console.error(`Error in ${t}:`,e),process.env.NODE_ENV}}document.addEventListener("DOMContentLoaded",()=>{try{new SecondStoryApp}catch(e){console.error("Failed to initialize SecondStoryApp:",e)}}),"undefined"!=typeof module&&module.exports&&(module.exports=SecondStoryApp);